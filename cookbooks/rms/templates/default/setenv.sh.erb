#!/bin/sh

export UPF_CONFIG_ENV=<%= node['rms']['environment']%>
export UPF_TOMCAT_HOME=<%= node['rms']['tomcat_dir']%>
export UPF_CONFIG_HOME=$UPF_TOMCAT_HOME/appConfig
export UPF_LOG_HOME=$UPF_CONFIG_HOME

export CATALINA_OPTS="-Depf.config.root=$UPF_CONFIG_HOME -Depf.config.env=$UPF_CONFIG_ENV -Dactivemq.conf=$UPF_CONFIG_HOME/app-common-config/environment/$UPF_CONFIG_ENV/activemq -Dactivemq.data=$UPF_CONFIG_HOME/activemq-data -Dlog4j.configuration=file:$UPF_CONFIG_HOME/logging/log4j.xml -Djava.security.auth.login.config=$UPF_TOMCAT_HOME/conf/jaas.config -Dwebconsole.type=properties -Dwebconsole.jms.url=tcp://<%= node['ipaddress']%>:61616 -Dwebconsole.jmx.url=service:jmx:rmi:///jndi/rmi://<%= node['ipaddress']%>:11444/jmxrmi -Dwebconsole.jmx.user=system -Dwebconsole.jmx.password=manager -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=11444 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -Dorg.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true -Dorg.apache.catalina.connector.CoyoteAdapter.ALLOW_BACKSLASH=true"
export JAVA_OPTS="-Xms2048m -Xmx2048m -XX:NewSize=512m -XX:MaxNewSize=512m -XX:PermSize=512m -XX:MaxPermSize=512m -Djava.util.logging.config.file=$UPF_TOMCAT_HOME/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Dwebconsole.type=properties -Dwebconsole.jms.url=<%= node['openupf']['JMS.epfAuditConnectionFactory.brokerURL']%>.:61616 -Depf.config.root=$UPF_CONFIG_HOME -Depf.config.env=$UPF_CONFIG_ENV -Dspring.profiles.active=$UPF_CONFIG_ENV -Dactivemq.conf=$UPF_CONFIG_HOME/activemq-config/ -Dactivemq.data=$UPF_CONFIG_HOME/activemq-data -Dlog4j.configuration=$UPF_CONFIG_HOME/logging/log4j.xml -Djava.security.auth.login.config=$UPF_TOMCAT_HOME/conf/jaas.config -classpath $UPF_TOMCAT_HOME/bin/bootstrap.jar:$UPF_TOMCAT_HOME/bin/tomcat-juli.jar -Dcatalina.base=$UPF_TOMCAT_HOME -Dcatalina.home=$UPF_TOMCAT_HOME -Djava.io.tmpdir=$UPF_TOMCAT_HOME/temp -Dwtp.deploy=$UPF_TOMCAT_HOME/wtpwebapps -Djavax.net.ssl.trustStore=$UPF_CONFIG_HOME/certs -Djavax.net.ssl.keyStore=$UPF_CONFIG_HOME/certs -DEPF_CONTENT_RUNTIME_REPO_SERVER=<%= node['rms']['epf_content_runtime_repo_server']%> -DEPF_CONTENT_STATIC_IMAGE_HOST=<%= node['rms']['epf_content_static_image_host']%>"
